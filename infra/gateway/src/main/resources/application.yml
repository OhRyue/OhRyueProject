server:
  port: 8080
spring:
  application.name: gateway
  cloud:
    gateway:
      default-filters:
        - DedupeResponseHeader=Access-Control-Allow-Credentials Access-Control-Allow-Origin
      routes:
        - id: account
          uri: lb://account-service
          predicates: [ Path=/api/account/** ]
          filters: [ StripPrefix=1 ]
#        - id: study
#          uri: lb://study-service
#          predicates: [ Path=/api/study/** ]
#          filters: [ StripPrefix=1 ]
        - id: study-service
          uri: lb://study-service
          predicates:
            - Path=/api/study/**
          filters:
            - StripPrefix=1

        # Swagger UI 정적 리소스 프록시
        - id: study-swagger-ui
          uri: lb://study-service
          predicates:
            - Path=/api/study/swagger-ui/**
          filters:
            - StripPrefix=1

        # OpenAPI JSON 프록시
        - id: study-openapi
          uri: lb://study-service
          predicates:
            - Path=/api/study/v3/api-docs/**
          filters:
            - StripPrefix=1
        - id: report
          uri: lb://report-service
          predicates: [ Path=/api/report/** ]
          filters: [ StripPrefix=1 ]
        - id: gamify
          uri: lb://gamify-service
          predicates: [ Path=/api/gamify/** ]
          filters: [ StripPrefix=1 ]
        - id: cert
          uri: lb://cert-service
          predicates: [ Path=/api/cert/** ]
          filters: [ StripPrefix=1 ]
        - id: versus
          uri: lb://versus-service
          predicates: [ Path=/api/versus/** ]
          filters: [ StripPrefix=1 ]
    discovery.client.simple: false

  main:
    web-application-type: reactive

management:
  endpoints.web.exposure.include: '*'

eureka:
  client:
    serviceUrl.defaultZone: http://discovery:8761/eureka